<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>计算器</title>
	</head>
		 <link rel="stylesheet" type="text/css" href="css/calculator.css" />
   </head>   
   <div id="description">
   	计算机简介：1:多元运算；2:如百分数，平方，平方根
   	<br />
   	<h4 style="margin-left: 70px;">计算器</h4>
   </div>
		<body> 
		     	<div id="SDiv"> 
		     		<div id="show">
		     			<div id="show_child"></div>
		     		</div>
		     	<input type="text" name="io" id="answer" value="" />
		     	<br/>
		     	<input type="button" name="" id="" value="%" onclick="operator('percent')" /> 
		     	<input type="button" name="" id="" value="X²" onclick="operator('pow')" /> 
		     	<input type="button" name="" id="" value="√️" onclick="operator('sqrt')" /> 
		     	<input type="button" name="" id="" value="⬅︎" onclick="operator('backspace')" /> <br />
		     	<input type="button" name="" id="" value="1" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="2" onclick="calCulate(this.value)" />
		     	<input type="button" name="" id="" value="3" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="4" onclick="calCulate(this.value)" /><br />
		     	<input type="button" name="" id="" value="5" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="6" onclick="calCulate(this.value)" />
		     	<input type="button" name="" id="" value="7" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="8" onclick="calCulate(this.value)" /><br />
		     	<input type="button" name="" id="" value="9" onclick="calCulate(this.value)" />
		     	<input type="button" name="" id="" value="0" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="." onclick="calCulate(this.value)" />
		     	<input type="button" name="" id="" value="C" onclick="a('')" /><br/> 
		     	<input type="button" name="" id="" value="+" onclick="calCulate(this.value)" />
		     	<input type="button" name="" id="" value="-" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="*" onclick="calCulate(this.value)" /> 
		     	<input type="button" name="" id="" value="/" onclick="calCulate(this.value)" /><br/> 
		     	<input type="button" name="" id="equ" value="=" onclick="e()" /> 
		     	</div> 
		     	
		     	<script type="text/javascript">
		     		input = document.getElementById("answer")
		     		show =document.getElementById("show_child")
		     		//get the input  expression
		     		function calCulate(v) {
		     			if(input.value=='0' && v=='0'){
		     				input.value='0'
		     			}
		     			else if(input.value=='0' && v!='.'){
		     				input.value=v
		     			}
		     			else
		     			    input.value += v
		     		} 
		     		// free the input
		     		function a(v) {
		     			input.value = v
		     		} 
		     		//work out the result
		     		function e() {
		     			try { 
		     				if(show.offsetHeight>81){
		     					t=show.innerHTML.indexOf("=<br>")
		     					var str=show.innerHTML
		     					str=str.substr(t+5, str.length)
		     					show.innerHTML=str
		     				}
		     				show.innerHTML+=input.value + "=<br>"
		     				a(eval(input.value)) 
		     			}
		     			catch (e) {
		     				a('error') 
		     			}
		     		}
		     		//kind of operator
		     		function operator(type) {
		     			switch (type) {
		     				case "backspace": 
		     				   var str = input.value;
		     				   str = (str != "0") ? str : "";
		     				   str = str.substr(0, str.length - 1);
		     				   str = (str != "") ? str : "0";
		     				   input.value = str; 
		     				   break;
		     				case "opposite": 
		     				   input.value = -input.value;
		     				   break; 
		     				case "percent": 
		     				   input.value = input.value / 100;
		     				   break;
		     				case "pow": 
		     				   input.value = Math.pow(input.value, 2);
		     				   break; 
		     				case "sqrt":
		     				   input.value = Math.sqrt(input.value); 
		     				   break;
		     			}
		     			}
		     		</script>
		     		
		     		
		     </body>	
</html>
